<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FarmerVoice ‚Äì Voice Enabled Smart Kisan</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#e8f5e9,#e3f2fd);
}
header{
  background:#ffffff;
  padding:12px 16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 2px 8px rgba(0,0,0,.1);
}
h1{margin:0;font-size:20px;color:#2e7d32;}
#location{background:#0288d1;color:white;padding:6px 12px;border-radius:16px;font-size:13px;}

main{
  max-width:800px;
  margin:auto;
  padding:20px;
  text-align:center;
}

.card{
  background:white;
  border-radius:14px;
  padding:20px;
  margin-bottom:18px;
  box-shadow:0 4px 12px rgba(0,0,0,.1);
}

#output{
  font-size:18px;
  white-space:pre-line;
}

.mic{
  width:90px;
  height:90px;
  border-radius:50%;
  background:linear-gradient(135deg,#2e7d32,#0288d1);
  border:none;
  font-size:36px;
  color:white;
  cursor:pointer;
  box-shadow:0 5px 18px rgba(0,0,0,.3);
}

.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:12px;
  margin-top:15px;
}

.grid button{
  border:none;
  background:white;
  padding:14px;
  border-radius:10px;
  cursor:pointer;
  box-shadow:0 2px 6px rgba(0,0,0,.15);
  font-weight:bold;
}

.lang{
  margin-bottom:12px;
}
.lang button{
  margin:4px;
  padding:6px 12px;
  border:none;
  border-radius:6px;
  background:#0288d1;
  color:white;
  cursor:pointer;
}

footer{
  text-align:center;
  font-size:12px;
  color:#555;
  padding:10px;
}
</style>
</head>

<body>

<header>
  <h1>FarmerVoice üåæ</h1>
  <div id="location">Detecting‚Ä¶</div>
</header>

<main>

<div class="lang">
  <b>Language:</b>
  <button onclick="setLang('te-IN')">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</button>
  <button onclick="setLang('hi-IN')">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
</div>

<div class="card">
  <div id="output">Loading‚Ä¶</div>
</div>

<button class="mic" onclick="startListening()">üé§</button>

<div class="grid">
  <button onclick="show('crop')">üå± Crop</button>
  <button onclick="show('water')">üíß Water</button>
  <button onclick="show('weather')">‚òÄ Weather</button>
  <button onclick="show('market')">üìà Market</button>
  <button onclick="show('news')">üì∞ News</button>
  <button onclick="show('store')">üõí Store</button>
</div>

</main>

<footer>Hackathon MVP ‚Äì Voice Enabled Smart Crop & Market Advisor</footer>

<script>
let lang = "hi-IN";
let voice = null;

const content = {
  "te-IN":{
    welcome:"‡∞∞‡±à‡∞§‡±Å ‡∞µ‡∞æ‡∞Ø‡∞ø‡∞∏‡±ç‚Äå‡∞ï‡±Å ‡∞∏‡±ç‡∞µ‡∞æ‡∞ó‡∞§‡∞Ç",
    crop:"‡∞à ‡∞∏‡±Ä‡∞ú‡∞®‡±ç‚Äå‡∞ï‡±Å ‡∞µ‡∞∞‡∞ø, ‡∞™‡±ç‡∞∞‡∞§‡±ç‡∞§‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞Æ‡∞ø‡∞∞‡∞™ ‡∞™‡∞Ç‡∞ü‡∞≤‡±Å ‡∞Ö‡∞®‡±Å‡∞ï‡±Ç‡∞≤‡∞Ç.",
    water:"‡∞≠‡±Ç‡∞ó‡∞∞‡±ç‡∞≠ ‡∞ú‡∞≤ ‡∞∏‡±ç‡∞•‡∞æ‡∞Ø‡∞ø ‡∞Æ‡∞ß‡±ç‡∞Ø‡∞∏‡±ç‡∞•‡∞Ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞¶‡∞ø. ‡∞µ‡∞∞‡±ç‡∞∑‡∞™‡±Å ‡∞®‡±Ä‡∞ü‡∞ø ‡∞∏‡∞Ç‡∞∞‡∞ï‡±ç‡∞∑‡∞£ ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.",
    weather:"‡∞à ‡∞∞‡±ã‡∞ú‡±Å ‡∞Æ‡±ã‡∞∏‡±ç‡∞§‡∞∞‡±Å ‡∞é‡∞Ç‡∞° ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞∏‡±ç‡∞µ‡∞≤‡±ç‡∞™ ‡∞ó‡∞æ‡∞≤‡∞ø ‡∞â‡∞Ç‡∞ü‡±Å‡∞Ç‡∞¶‡∞ø.",
    market:"‡∞ü‡∞Æ‡∞æ‡∞ü ‡∞ß‡∞∞ ‚Çπ25/kg, ‡∞µ‡∞∞‡∞ø ‚Çπ2200/quintal.",
    news:"‡∞∞‡±à‡∞§‡±Å‡∞≤ ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞ï‡±ä‡∞§‡±ç‡∞§ ‡∞™‡±ç‡∞∞‡∞≠‡±Å‡∞§‡±ç‡∞µ ‡∞∏‡∞¨‡±ç‡∞∏‡∞ø‡∞°‡±Ä ‡∞™‡∞•‡∞ï‡∞Ç ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠‡∞Æ‡±à‡∞Ç‡∞¶‡∞ø.",
    store:"üõí ‡∞∞‡±à‡∞§‡±Å ‡∞∏‡±ç‡∞ü‡±ã‡∞∞‡±ç\n\nüåæ ‡∞µ‡∞∞‡∞ø ‚Äì ‚Çπ2200/quintal\nüçÖ ‡∞ü‡∞Æ‡∞æ‡∞ü ‚Äì ‚Çπ25/kg\nü•î ‡∞Ü‡∞≤‡±Å‡∞ó‡∞°‡±ç‡∞° ‚Äì ‚Çπ18/kg\n\nüìû ‡∞®‡±á‡∞∞‡±Å‡∞ó‡∞æ ‡∞∞‡±à‡∞§‡±Å‡∞®‡±Å‡∞Ç‡∞ö‡∞ø ‡∞ï‡±ä‡∞®‡∞Ç‡∞°‡∞ø\n‡∞Æ‡∞ß‡±ç‡∞Ø‡∞µ‡∞∞‡±ç‡∞§‡±Å‡∞≤‡±Å ‡∞≤‡±á‡∞∞‡±Å"
  },
  "hi-IN":{
    welcome:"‡§´‡§æ‡§∞‡•ç‡§Æ‡§∞ ‡§µ‡•â‡§á‡§∏ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à",
    crop:"‡§á‡§∏ ‡§Æ‡•å‡§∏‡§Æ ‡§Æ‡•á‡§Ç ‡§ß‡§æ‡§®, ‡§ï‡§™‡§æ‡§∏ ‡§î‡§∞ ‡§Æ‡§ø‡§∞‡•ç‡§ö ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§´‡§∏‡§≤‡•á‡§Ç ‡§π‡•à‡§Ç.",
    water:"‡§≠‡•Ç‡§ú‡§≤ ‡§∏‡•ç‡§§‡§∞ ‡§Æ‡§ß‡•ç‡§Ø‡§Æ ‡§π‡•à‡•§ ‡§µ‡§∞‡•ç‡§∑‡§æ ‡§ú‡§≤ ‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç.",
    weather:"‡§Ü‡§ú ‡§Æ‡•å‡§∏‡§Æ ‡§∏‡§æ‡§´ ‡§î‡§∞ ‡§π‡§≤‡•ç‡§ï‡•Ä ‡§π‡§µ‡§æ ‡§π‡•à.",
    market:"‡§ü‡§Æ‡§æ‡§ü‡§∞ ‚Çπ25/kg, ‡§ß‡§æ‡§® ‚Çπ2200/quintal.",
    news:"‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡§à ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§¨‡•ç‡§∏‡§ø‡§°‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•Å‡§à ‡§π‡•à.",
    store:"üõí ‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡•ç‡§ü‡•ã‡§∞\n\nüåæ ‡§ß‡§æ‡§® ‚Äì ‚Çπ2200/quintal\nüçÖ ‡§ü‡§Æ‡§æ‡§ü‡§∞ ‚Äì ‚Çπ25/kg\nü•î ‡§Ü‡§≤‡•Ç ‚Äì ‚Çπ18/kg\n\nüìû ‡§∏‡•Ä‡§ß‡•á ‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡•á ‡§ñ‡§∞‡•Ä‡§¶‡•á‡§Ç\n‡§ï‡•ã‡§à ‡§¨‡§ø‡§ö‡•å‡§≤‡§ø‡§Ø‡§æ ‡§®‡§π‡•Ä‡§Ç"
  }
};

function loadVoice(){
  const voices = speechSynthesis.getVoices();
  voice = voices.find(v=>v.lang===lang) ||
          voices.find(v=>v.lang.startsWith(lang.split("-")[0])) ||
          voices[0];
}
speechSynthesis.onvoiceschanged = loadVoice;

function speak(text){
  speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = lang;
  if(voice) u.voice = voice;
  speechSynthesis.speak(u);
}

function show(type){
  const text = content[lang][type];
  document.getElementById("output").innerText = text;
  speak(text);
}

function setLang(l){
  lang = l;
  loadVoice();
  document.getElementById("output").innerText = content[lang].welcome;
  speak(content[lang].welcome);
}

function startListening(){
  const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
  if(!SR){ alert("Voice not supported"); return; }

  const rec = new SR();
  rec.lang = lang;

  rec.onresult = e=>{
    const t = e.results[0][0].transcript.toLowerCase();

    if(lang==="te-IN"){
      if(t.includes("‡∞™‡∞Ç‡∞ü")) show("crop");
      else if(t.includes("‡∞®‡±Ä‡∞∞‡±Å")) show("water");
      else if(t.includes("‡∞µ‡∞æ‡∞§‡∞æ‡∞µ‡∞∞‡∞£")) show("weather");
      else if(t.includes("‡∞ß‡∞∞")) show("market");
      else if(t.includes("‡∞µ‡∞æ‡∞∞‡±ç‡∞§")) show("news");
      else show("store");
    }else{
      if(t.includes("‡§´‡§∏‡§≤")) show("crop");
      else if(t.includes("‡§™‡§æ‡§®‡•Ä")) show("water");
      else if(t.includes("‡§Æ‡•å‡§∏‡§Æ")) show("weather");
      else if(t.includes("‡§¨‡§æ‡§ú‡§æ‡§∞")) show("market");
      else if(t.includes("‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞")) show("news");
      else show("store");
    }
  };
  rec.start();
}

navigator.geolocation.getCurrentPosition(async p=>{
  const r = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${p.coords.latitude}&lon=${p.coords.longitude}`);
  const g = await r.json();
  const state = g.address.state || "India";
  document.getElementById("location").innerText = state;

  if(state.toLowerCase().includes("andhra") || state.toLowerCase().includes("telangana")){
    lang="te-IN";
  }
  loadVoice();
  document.getElementById("output").innerText = content[lang].welcome;
  speak(content[lang].welcome);
});
</script>

</body>
</html>
